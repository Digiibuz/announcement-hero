
// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

const SUPABASE_URL = "https://rdwqedmvzicerwotjseg.supabase.co";
const SUPABASE_PUBLISHABLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkd3FlZG12emljZXJ3b3Rqc2VnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwNzg4MzEsImV4cCI6MjA1ODY1NDgzMX0.Ohle_vVvdoCvsObP9A_AdyM52XdzisIvHvH1D1a88zk";

// Import the supabase client like this:
// import { supabase } from "@/integrations/supabase/client";

// Suppression des logs pour les requêtes échouées
const originalFetch = window.fetch;
window.fetch = function(input, init) {
  // Si la requête est destinée à Supabase, on capture les erreurs pour éviter leur affichage dans la console
  try {
    const url = input instanceof Request ? input.url : String(input);
    if (url.includes('supabase.co') && url.includes('/auth/')) {
      return originalFetch(input, init)
        .catch(error => {
          // Silence cette erreur pour ne pas l'afficher dans la console
          throw error; // On relance l'erreur pour que Supabase puisse la gérer
        });
    }
  } catch (e) {
    // Silence cette erreur pour ne pas l'afficher dans la console
  }
  
  // Sinon, on utilise le fetch original
  return originalFetch(input, init);
};

export const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {
  auth: {
    persistSession: true,
    autoRefreshToken: true,
    detectSessionInUrl: true,
    // Ne pas logger les erreurs d'authentification
    flowType: 'implicit',
  },
  global: {
    // Gérer les erreurs sans les afficher dans la console
    fetch: (url, options) => {
      return window.fetch(url, options)
        .catch(error => {
          // Silence les erreurs réseau pour éviter l'affichage dans la console
          throw error;
        });
    }
  }
});
