
// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

// Hardcode the actual Supabase URL and anon key for this project
const supabaseUrl = "https://rdwqedmvzicerwotjseg.supabase.co";
const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkd3FlZG12emljZXJ3b3Rqc2VnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwNzg4MzEsImV4cCI6MjA1ODY1NDgzMX0.Ohle_vVvdoCvsObP9A_AdyM52XdzisIvHvH1D1a88zk";

// Create a Supabase client with proper configuration for client-side operations
export const supabase = createClient<Database>(
  supabaseUrl, 
  supabaseAnonKey,
  {
    auth: {
      persistSession: true,
      autoRefreshToken: true,
      storage: localStorage,
    }
  }
);

// Utility function to clean up auth state
export const cleanupAuthState = () => {
  try {
    // Remove all Supabase-related keys from localStorage
    Object.keys(localStorage).forEach(key => {
      if (key.startsWith('supabase.auth.') || key.includes('sb-')) {
        console.log("Removing auth storage key:", key);
        localStorage.removeItem(key);
      }
    });

    // Also clean sessionStorage if used
    Object.keys(sessionStorage || {}).forEach(key => {
      if (key.startsWith('supabase.auth.') || key.includes('sb-')) {
        sessionStorage.removeItem(key);
      }
    });
    
    console.log("Auth state cleanup completed");
  } catch (err) {
    console.warn("Error during auth cleanup:", err);
  }
};

// Note: This client only has anon permissions
// For any sensitive operations, use edge functions that can access service role keys securely
